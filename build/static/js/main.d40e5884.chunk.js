(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{46:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(5),r=n.n(c),i=n(35),a=n.n(i),s=(n(46),n(36)),d=n(37),f=n(40),l=n(39),u=n(38),h=n.n(u),p=function(e){Object(f.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).componentDidMount=function(){o.socket=h()("/webrtcPeer",{path:"/webrtc",query:{}}),o.socket.on("connection-success",(function(e){console.log(e)})),o.socket.on("offerOrAnswer",(function(e){o.textref.value=JSON.stringify(e),o.pc.setRemoteDescription(new RTCSessionDescription(e))})),o.socket.on("candidate",(function(e){o.pc.addIceCandidate(new RTCIceCandidate(e))}));o.pc=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),o.pc.onicecandidate=function(e){e.candidate&&o.sendToPeer("candidate",e.candidate)},o.pc.oniceconnectionstatechange=function(e){console.log(e)},o.pc.onaddstream=function(e){o.remoteVideoref.current.srcObject=e.stream};navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(e){window.localStream=e,o.localVideoref.current.srcObject=e,o.pc.addStream(e)})).catch((function(e){console.log("getUserMedia Error: ",e)}))},o.sendToPeer=function(e,t){o.socket.emit(e,{socketID:o.socket.id,payload:t})},o.createOffer=function(){console.log("Offer"),o.pc.createOffer({offerToReceiveVideo:1}).then((function(e){o.pc.setLocalDescription(e),o.sendToPeer("offerOrAnswer",e)}))},o.createAnswer=function(){console.log("Answer"),o.pc.createAnswer({offerToReceiveVideo:1}).then((function(e){o.pc.setLocalDescription(e),o.sendToPeer("offerOrAnswer",e)}))},o.setRemoteDescription=function(){var e=JSON.parse(o.textref.value);o.pc.setRemoteDescription(new RTCSessionDescription(e))},o.addCandidate=function(){o.candidates.forEach((function(e){console.log(JSON.stringify(e)),o.pc.addIceCandidate(new RTCIceCandidate(e))}))},o.localVideoref=r.a.createRef(),o.remoteVideoref=r.a.createRef(),o.socket=null,o.candidates=[],o}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{style:{textAlign:"center",marginTop:20},children:[Object(o.jsx)("video",{style:{width:300,height:300,margin:12,backgroundColor:"black",border:"4px dotted white"},ref:this.localVideoref,autoPlay:!0}),Object(o.jsx)("video",{style:{width:300,height:300,margin:12,backgroundColor:"black",border:"4px dotted white"},ref:this.remoteVideoref,autoPlay:!0}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{onClick:this.createOffer,children:"SendOffer"}),Object(o.jsx)("button",{onClick:this.createAnswer,children:"Answer"}),Object(o.jsx)("br",{}),Object(o.jsx)("textarea",{style:{width:450,height:40},ref:function(t){e.textref=t}}),Object(o.jsx)("p",{children:"This is the text area that shows SDP shared to you by the other party"})]})}}]),n}(c.Component),b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),r(e),i(e)}))};a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(p,{})}),document.getElementById("root")),b()}},[[78,1,2]]]);
//# sourceMappingURL=main.d40e5884.chunk.js.map